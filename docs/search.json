[
  {
    "objectID": "open_viz.html",
    "href": "open_viz.html",
    "title": "Basic insights from the dataset",
    "section": "",
    "text": "Here are some exploratory work that we have produced using the Project CCHAIN dataset.\n\n\n\n\n\n\nAccess the notebook that generates the visualizations here: Github\n\n\n\n\n\n\n\n\n\n\n\nMade using health (disease_pidsr_totals) and climate (climate_atmosphere) tables.\n\n\n\n\nThe graph shows a smoothened time series plot of weekly average precipitation (blue), and total dengue cases (red) overlaid with detected outbreak periods (pink shading).\nIn Dagupan City, which falls within the Type 1 climate zone, rainfall is expected to peak between June to September each year.\nWe see from the graph that dengue outbreaks typically occur 2-4 weeks after the peak in rainfall, indicating a lag between increased precipitation and the rise in dengue cases. While this pattern is observed, we need more statistical tests to ensure robustness of the results.\n\n\n\n\n\n\n\n\n\nMade using a socioeconomic (informal_settlement_community_surveys_v1) table\n\n\n\n\nTo understand the distribution and needs of vulnerable groups, informal settlement survey asked if there are the followingpopulations in their households: student, senior citizens, and persons with disabilities.\nIloilo City has the least percentage of households with students among the surveyed cities, indicating a potential area of focus for educational outreach and support programs. The lower student presence could reflect demographic trends or migration patterns affecting school-age populations.\nFurthermore, there is a slightly higher proportion of senior citizens in Iloilo City compared to other cities. This demographic trend highlights the importance of senior citizen services and healthcare facilities in the area to cater to their specific needs.\nWe note that Mandaue does not have a recorded percentage of senior citizens because it was one of the earlier surveys conducted, and it was not included in the survey questions.\n\n\n\n\n\n\n\n\n\nMade using a disease (disease_lgu_disaggregated_totals) and socioeconomic (informal_settlement_community_surveys_v1) table\n\n\n\n\nWe can also relate disease and socioeconomic factors not just across time, but across space. For example, in Muntinlupa, there are fewer typhoid cases where there is access to formal water sources, highlighting the importance of proper infrastructure.\nConversely, more typhoid cases are observed in areas where water is sourced from pumps (“nakikiigib”), underscoring the health risks associated with inadequate water supply.\nThese spatial patterns can inform targeted interventions and resource allocation to improve public health outcomes. However, similar to the previous example, we need more statistical tests to ensure the robustness of the results and confirm these observations.\n\n\n\n\n\n\n\n\n\nMade using an environment (mapbox_health_facility_brgy_isochrones) table\n\n\n\n\nThese series of maps for all cities shows how much barangay population can reached within 5 minutes away from a hospital. We define a 5-min isochrone around a hospital as an area that can be reached within a 5-minute travel time, providing a visual representation of hospital accessibility to the city.\nIn the top row, cities with better access to healthcare tend to be more compact and densely populated. On the other hand, in the bottom row, access to healthcare is often limited to the city center, leaving peripheral areas underserved.\nWhile we can interpret population access to hospitals within the city, we note that the population may opt to go to a nearby city with better facilities, as seen in the case of NCR. This behavior highlights the need for comprehensive regional planning to ensure equitable healthcare access.\nReversing the emphasis towards the provider, we can treat this analysis as a** measure of a city LGU’s current capacity to provide accessible healthcare to its constituents**. This perspective underscores the importance of local government initiatives in improving healthcare infrastructure within their jurisdiction."
  },
  {
    "objectID": "open_viz.html#visualizing-precipitation-and-dengue-cases-peaks-in-dagupan",
    "href": "open_viz.html#visualizing-precipitation-and-dengue-cases-peaks-in-dagupan",
    "title": "Basic insights from the dataset",
    "section": "",
    "text": "Made using health (disease_pidsr_totals) and climate (climate_atmosphere) tables.\n\n\n\n\nThe graph shows a smoothened time series plot of weekly average precipitation (blue), and total dengue cases (red) overlaid with detected outbreak periods (pink shading).\nIn Dagupan City, which falls within the Type 1 climate zone, rainfall is expected to peak between June to September each year.\nWe see from the graph that dengue outbreaks typically occur 2-4 weeks after the peak in rainfall, indicating a lag between increased precipitation and the rise in dengue cases. While this pattern is observed, we need more statistical tests to ensure robustness of the results."
  },
  {
    "objectID": "open_viz.html#comparing-households-with-vulnerable-populations-in-informal-settlements",
    "href": "open_viz.html#comparing-households-with-vulnerable-populations-in-informal-settlements",
    "title": "Basic insights from the dataset",
    "section": "",
    "text": "Made using a socioeconomic (informal_settlement_community_surveys_v1) table\n\n\n\n\nTo understand the distribution and needs of vulnerable groups, informal settlement survey asked if there are the followingpopulations in their households: student, senior citizens, and persons with disabilities.\nIloilo City has the least percentage of households with students among the surveyed cities, indicating a potential area of focus for educational outreach and support programs. The lower student presence could reflect demographic trends or migration patterns affecting school-age populations.\nFurthermore, there is a slightly higher proportion of senior citizens in Iloilo City compared to other cities. This demographic trend highlights the importance of senior citizen services and healthcare facilities in the area to cater to their specific needs.\nWe note that Mandaue does not have a recorded percentage of senior citizens because it was one of the earlier surveys conducted, and it was not included in the survey questions."
  },
  {
    "objectID": "open_viz.html#mapping-typhoid-and-access-to-water-sources-in-muntinlupa",
    "href": "open_viz.html#mapping-typhoid-and-access-to-water-sources-in-muntinlupa",
    "title": "Basic insights from the dataset",
    "section": "",
    "text": "Made using a disease (disease_lgu_disaggregated_totals) and socioeconomic (informal_settlement_community_surveys_v1) table\n\n\n\n\nWe can also relate disease and socioeconomic factors not just across time, but across space. For example, in Muntinlupa, there are fewer typhoid cases where there is access to formal water sources, highlighting the importance of proper infrastructure.\nConversely, more typhoid cases are observed in areas where water is sourced from pumps (“nakikiigib”), underscoring the health risks associated with inadequate water supply.\nThese spatial patterns can inform targeted interventions and resource allocation to improve public health outcomes. However, similar to the previous example, we need more statistical tests to ensure the robustness of the results and confirm these observations."
  },
  {
    "objectID": "open_viz.html#surveying-hospital-access-using-5-min-isochrones",
    "href": "open_viz.html#surveying-hospital-access-using-5-min-isochrones",
    "title": "Basic insights from the dataset",
    "section": "",
    "text": "Made using an environment (mapbox_health_facility_brgy_isochrones) table\n\n\n\n\nThese series of maps for all cities shows how much barangay population can reached within 5 minutes away from a hospital. We define a 5-min isochrone around a hospital as an area that can be reached within a 5-minute travel time, providing a visual representation of hospital accessibility to the city.\nIn the top row, cities with better access to healthcare tend to be more compact and densely populated. On the other hand, in the bottom row, access to healthcare is often limited to the city center, leaving peripheral areas underserved.\nWhile we can interpret population access to hospitals within the city, we note that the population may opt to go to a nearby city with better facilities, as seen in the case of NCR. This behavior highlights the need for comprehensive regional planning to ensure equitable healthcare access.\nReversing the emphasis towards the provider, we can treat this analysis as a** measure of a city LGU’s current capacity to provide accessible healthcare to its constituents**. This perspective underscores the importance of local government initiatives in improving healthcare infrastructure within their jurisdiction."
  },
  {
    "objectID": "open_data.html",
    "href": "open_data.html",
    "title": "The Project CCHAIN Linked Dataset",
    "section": "",
    "text": "The Project CCHAIN dataset is composed of 29 tables spanning 20 years (2003-2022) and encompassing health, climate, environmental, and socioeconomic variables at the barangay level across 12 Philippine cities (Dagupan, Palayan, Navotas, Mandaluyong, Muntinlupa,Legazpi, Iloilo, Mandaue, Tacloban, Zamboanga, Cagayan de Oro, Davao)\n\n\n\n\n\n\nQuick links\n\n\n\n\nAccess the data in the following links: GDrive,Kaggle,HDX\nNotebook to link the dataset here\nFull documentation here\n\n\n\nThe tables are designed in a way that users can choose variables that are most relevant to their focus city and use case, and link these variables to form a single dataset by merging using standard geography codes and calendar dates. This can be done using the provided linking notebook, or offline using the user’s own code.\n\n\n\n\n\n\nTips on using the data\n\n\n\n\nFocus on one location. Starting with a detailed analysis of one location allows for a better understanding of the local dynamics, which may differ across locations.\nChoose one health data source. Pick one of either a central or local data source. Using two different data health sources is not advised because it will lead to double/overcounting of disease cases.\nDo NOT use all variables at once- do a literature review first to identify possible key variables. More often than not, using all variables is not necessary and may even yield subpar results.\nCheck data availability on your focus location and make sure they fit the requirements of your study."
  },
  {
    "objectID": "open_data.html#overview",
    "href": "open_data.html#overview",
    "title": "The Project CCHAIN Linked Dataset",
    "section": "",
    "text": "The Project CCHAIN dataset is composed of 29 tables spanning 20 years (2003-2022) and encompassing health, climate, environmental, and socioeconomic variables at the barangay level across 12 Philippine cities (Dagupan, Palayan, Navotas, Mandaluyong, Muntinlupa,Legazpi, Iloilo, Mandaue, Tacloban, Zamboanga, Cagayan de Oro, Davao)\n\n\n\n\n\n\nQuick links\n\n\n\n\nAccess the data in the following links: GDrive,Kaggle,HDX\nNotebook to link the dataset here\nFull documentation here\n\n\n\nThe tables are designed in a way that users can choose variables that are most relevant to their focus city and use case, and link these variables to form a single dataset by merging using standard geography codes and calendar dates. This can be done using the provided linking notebook, or offline using the user’s own code.\n\n\n\n\n\n\nTips on using the data\n\n\n\n\nFocus on one location. Starting with a detailed analysis of one location allows for a better understanding of the local dynamics, which may differ across locations.\nChoose one health data source. Pick one of either a central or local data source. Using two different data health sources is not advised because it will lead to double/overcounting of disease cases.\nDo NOT use all variables at once- do a literature review first to identify possible key variables. More often than not, using all variables is not necessary and may even yield subpar results.\nCheck data availability on your focus location and make sure they fit the requirements of your study."
  },
  {
    "objectID": "open_data.html#licensing",
    "href": "open_data.html#licensing",
    "title": "The Project CCHAIN Linked Dataset",
    "section": "Licensing",
    "text": "Licensing\nThe Project CCHAIN dataset adapted the Creative Commons Attribution 4.0 International (CC BY 4.0) license. This allows anyone to share (copy and redistribute) and adapt (remix, transform, and build upon) a work, as long as they give appropriate credit to the original creator.\nOne exception, the tm_open_buildings table, follows the Open Database License (ODbL) as directed by its source, OpenStreetMap. Under the ODbL, users are free to use, modify, and distribute the database, but on top of CC BY 4.0’s attribution requirement, this license requires to share any modifications they make under the same ODbL license.\nThese licenses promote open data principles, fostering collaboration and innovation while ensuring proper acknowledgment and transparency in the use of database resources."
  },
  {
    "objectID": "open_data.html#basics",
    "href": "open_data.html#basics",
    "title": "The Project CCHAIN Linked Dataset",
    "section": "Basics",
    "text": "Basics\nA central calendar, frequency, as well as the standard geography codes, geometry, area, and distance to coastlines are provided as tables for users.\n\n\n\nTable\nVariables\n\n\n\n\ncalendar\nStandard ISO 8601 dates from 2003 to 2022\n\n\nlocation\nPhilippine Standard Geographic Code (PSGC) administrative level identifier data for chosen cities up to barangay (adm4)\n\n\nfrequency\nDescription of update frequency strings\n\n\ndisease\nlist of included climate and disaster sensitive diseases\n\n\nbrgy_geography\nBarangay total area, distance to coast, geometry"
  },
  {
    "objectID": "open_data.html#health",
    "href": "open_data.html#health",
    "title": "The Project CCHAIN Linked Dataset",
    "section": "Health",
    "text": "Health\n\nDisease tables\nDisease data came from local and national sources, each focusing on different disease outcomes and temporal resolutions. The tables includes 17 diseases, identified as climate- and disaster-sensitive in the Philippines (Wong et al., 2018, Wong et al., 2022).\nAll disease data were encoded according to the International Classification of Diseases (ICD-10) and aggregated at the barangay level, ensuring the removal of all personally identifiable information to uphold data privacy.\n\n\n\nICD-10 code\nDisease common name\n\n\n\n\nA09.0\nAcute bloody diarrhea\n\n\nB15\nHepatitis A\n\n\nA00\nCholera\n\n\nA90-A91\nDengue fever\n\n\nA27\nLeptospirosis\n\n\nA82\nRabies\n\n\nA01\nTyphoid fever\n\n\nA08\nRotaviral enteritis\n\n\nA92\nChikunguya viral disease\n\n\nE08-E14\nDiabetes\n\n\nI11\nHypertensive heart disease\n\n\nI21-I22\nIschemic heart disease\n\n\nI63\nIschemic stroke\n\n\nA09\nGastroenteritis\n\n\nJ45\nAsthma\n\n\nI20-I25\nAngina\n\n\nT67\nHeat stroke\n\n\n\n\n1. Department of Health (DOH)\nThere are two data sources attributed to DOH, namely:\n\nPhilippine Integrated Disease Surveillance and Response (PIDSR) - focuses on reporting weekly cases of priority diseases, syndromes, and conditions for surveillance. Cases in this source may be suspected, probable, or confirmed (with a laboratory test).\nField Health Services Information System (FHSIS) - measures the coverage of essential public health services, using physician-diagnosed cases from LGUs’ monthly reports. This data includes disease cases that are diagnosed by a physician, and deaths attributed to the disease.\n\nFor both sources, we were able to request both the DOH central level totals and the LGU level reports containing baranggay, age and sex disaggregations.\n\n\n\n\n\n\nWarning\n\n\n\nNote that PIDSR aggregate reports are incorporated into the FHSIS annual morbidity report (UP-NIH, 2011) and, as such, data from these two sources have been separated into two datasets to prevent double-counting. Please do NOT combine cases from different data sources.\n\n\n\n\n2. Philippine Statistical Authority (PSA)\nThe PSA Vital Health Statistics records deaths and their causes through reports from provincial offices.\n\n\n\n\n\n\nWarning\n\n\n\nPlease do NOT combine PSA recorded deaths to deaths that are documented by DOH data sources, as this also results to double-counting.\n\n\nThe following are the tables that contain the disease data:\n\n\n\nTable\nSource\nDisease Outcome\nSpatial Coverage\n\n\n\n\ndisease_pidsr_totals\nPIDSR-DOH\ncases\ncity\n\n\ndisease_psa_totals\nPSA\ndeaths\ncity\n\n\ndisease_fhsis_totals\nFHSIS-LGU\ncases, deaths\ncity\n\n\ndisease_lgu_disaggregated_totals\nFHSIS-LGU, PIDSR-LGU\ncases, deaths\ncity or baranggay\n\n\n\nThese tables are made publicly available by Data Use Agreements between Epimetrics and their respective data owners."
  },
  {
    "objectID": "open_data.html#climate",
    "href": "open_data.html#climate",
    "title": "The Project CCHAIN Linked Dataset",
    "section": "Climate",
    "text": "Climate\nThe dataset incorporates daily climate variables that have been recognized as significant in disease modeling (Wong et al., 2018). These variables primarily come from publicly available gridded reanalysis datasets, offering the advantages of availability over the daily scale and global spatial coverage. Data is extracted and averaged over all grids covered within the boundaries of each barangay.\n\n\n\nTable\nVariables\n\n\n\n\nclimate_atmosphere\nMean, minimum and maximum temperature, precipitation, heat index, wind speed, relative humidity, solar radiation, UV radiation\n\n\nclimate_air_quality\nPrimary air pollutants (NO2, CO, SO2, ozone), particular matter (PM10, PM2.5)\n\n\nclimate_land\nNormalized difference vegetation index (NDVI)\n\n\nclimate_indices\nPercent of Normal Precipitation (PNP), 3- and 6-month standardized precipitation index (SPI6), 30 year monthly normal rainfall (mm)\n\n\nclimate_timestep_check\nNot part of the dataset, log of hourly timesteps used in aggregating raw climate parameters to daily scale"
  },
  {
    "objectID": "open_data.html#environment",
    "href": "open_data.html#environment",
    "title": "The Project CCHAIN Linked Dataset",
    "section": "Environment",
    "text": "Environment\n\nLand and hazards tables\nThe dataset also contains variables pertaining to land characteristics and hazards over the chosen cities. The dataset sources are in the form of shapefiles representing categorical variables (hazard level, type of cover), or presence of objects (e.g. buildings). While these sources are high resolution, all are only static and schedule of updates is unspecified.\nData sources are shapefiles depicting categorical variables like hazard levels and land cover types, or the presence of objects such as buildings. Although these sources offer high resolution, they are static, and there is no specified update schedule.\n\n\n\nTable\nCategories\n\n\n\n\nesa_worldcover\nsparse vegetation, builtup, cropland, grassland, herbaceous_wetland, mangroves, water bodies, shrubland, tree cover\n\n\ngoogle_open_buildings\nall buildings, &lt;100sqm buildings, 100-200 sqm buildings, &gt;200sqm buildings\n\n\nproject_noah_hazards\n[low,medium,high] hazard levels for landslides; flood at 5yr,25yr,100yr return period\n\n\n\n\n\nPoints of interest tables\nData on points of interest (POIs) are also included, and the following were computed based on the POI coordinates: (1) total counts within barangay bounds and (2) distances to barangay centroid. Details on the definitions of the POIs can be viewed in the OpenStreetMap documentation. Additionally, accessibility measure by percent of population reachable at discrete travel times to the nearest health facility (isochrone) for the whole city and per baranggay level are provided using Mapbox Isochrone API.\n\n\n\nTable\nPOI Categories\n\n\n\n\ngeoportal_doh_poi_health\nhealth station, rural health unit, hospital, clinic, infirmary, drug abuse treatment rehab center, social hygiene clinic, birthing clinic, medical clinic\n\n\nosm_poi_health\nclinic, dentist, doctor, hospital, optician, pharmacy\n\n\nosm_poi_amenity\natm, bank, college, community centre, convenience store, fire station, kindergarten, lighthouse, market place, park, police, school, shelter, supermarket, telephone, town hall, university\n\n\nosm_poi_water_body\nwetland, reservoir, water, riverbank, dock, river, stream, canal, drain\n\n\nosm_poi_sanitation\ndrinking water, water mill, water tower, water works, water well, sanitary dump station, toilet, recycling, waste basket, wastewater, waste transfer station\n\n\nmapbox_health_facility_brgy_isochrones, mapbox_health_facility_city_isochrones\nbarangay health center, hospital, rural health unit\n\n\n\nThe data in the isochrone tables covers 5, 15, and 30 minutes intervals, but for users seeking more granularity, we also provide 15 to 60 minutes isochrone data on a per minute interval separately in this link."
  },
  {
    "objectID": "open_data.html#socioeconomics",
    "href": "open_data.html#socioeconomics",
    "title": "The Project CCHAIN Linked Dataset",
    "section": "Socioeconomics",
    "text": "Socioeconomics\n\nDemography and income indicator tables\nThe dataset contains population estimates, as well as emerging remote-sensed indicators of development such as nighttime lights, and internet speeds. These data are also aggregated at the barangay level.\n\n\n\nTable\nVariables\n\n\n\n\nworldpop_population\npopulation count and population density\n\n\nookla_internet_speed\ndownload and upload speeds, number of devices, latency of both fixed and mobile connections\n\n\nnighttime_lights\ncloud-free calibrated nighttime radiance measurements\n\n\ntm_relative_wealth_index\ngridded estimates of wealth\n\n\n\n\n\nInformal settlement community survey tables\nFinally, the dataset also includes household surveys done on partner informal settlement communities in the cities of Muntinlupa, Davao, Iloilo, and Mandaue administered on various dates from 2001 to 2024. The data is manually encoded from existing paper hardcopies and underwent cleansing to eliminate personally identifiable data and correct encoding inconsistencies.\n\n\n\nTable\nVariables\n\n\n\n\ninformal_settlement_community_surveys_v1\nfamily composition, occupancy type, occupation, power source, water supply, toilet access, finances\n\n\ninformal_settlement_community_surveys_v2\nfamily composition, occupancy type, occupation, power source, water supply, toilet access, finances, education, tenure, transport, hazard experience, disaster support, diseases experienced, healthcare access\n\n\n\n\n\n\n\n\n\nDue to the sensitive nature of surveys and the vulnerability of the subjects involved, access to this table is regulated. Requests for access must be submitted for review and approval by the Philippine Action for Community-Led Shelter Initiatives, Inc. (PACSII).\nTo submit a request, please use this form.\n\n\n\n\n\nElements at risk table\nA dataset of 12,000 building outlines was also produced by manually annotating buildings over selected 250x250m tiles across the 12 cities. These tiles were carefully selected to focus on residential areas with diverse neighborhood densities, terrains, and levels of urbanization, as well as areas not yet mapped in OpenStreetMap. Each outline was drawn using a combination of visual inspection of satellite imagery, local knowledge, and validation from household survey data to cover all buildings present in the tile.\nThe attributes contain variables designed to indicate potential wealth markers useful for vulnerability analysis, and can also be used in computer vision models to expand the spatial coverage of the dataset.\n\n\n\n\n\n\nThis table is also released as its own, standalone dataset, TM Open Buildings, which can be viewed here. It is also hosted separately for download in Kaggle and HDX.\n\n\n\nTable source: tm_open_buildings\n\n\n\n\n\n\n\nBuilding Type\nAttributes\n\n\n\n\nSettlement - single\nroof material, roof layout, roof area, is within gated community\n\n\nSettlement - dense\nnone, outline drawn over extent of dense neighborhoods with overlapping rooftops\n\n\nNonsettlement\nheight"
  },
  {
    "objectID": "open_model.html",
    "href": "open_model.html",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "",
    "text": "We created an outbreak prediction baseline model that demonstrates the use of the Project CCHAIN dataset in a machine learning use case.\n\n\n\n\n\n\nAccess the full model notebook here: GDrive\n\n\n\n\n\nThe model code is under Apache 2.0, which allows developers to freely use, modify, and share software on an “as-is” basis, meaning without any warranties. When making changes, developers are required to document changes to the original code.\n\n\n\nObjective: Predict dengue outbreaks for Zamboanga City at the weekly scale.\nThe following were included in the input data as features for the model:\n\n\n\n\n\n\n\nFactor\nVariables\n\n\n\n\nClimate\ntemperature, humidity, rainfall, solar radiation, wind speed, vegetation, air quality\n\n\nDemographics\npopulation, population density\n\n\nFacilities\nclinics, hospitals, sanitation, water source,\n\n\nEconomic activity\nnightlights radiance\n\n\n\nFor this model, we will define the training and testing set as follows:\n\n\n\nSet\nTime covered\n\n\n\n\nTraining\nJan 2014-Mar 2019 (75 mos)\n\n\nTesting\nApr 2014-Dec 2020 (20 mos)"
  },
  {
    "objectID": "open_model.html#licensing",
    "href": "open_model.html#licensing",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "",
    "text": "The model code is under Apache 2.0, which allows developers to freely use, modify, and share software on an “as-is” basis, meaning without any warranties. When making changes, developers are required to document changes to the original code."
  },
  {
    "objectID": "open_model.html#specifications",
    "href": "open_model.html#specifications",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "",
    "text": "Objective: Predict dengue outbreaks for Zamboanga City at the weekly scale.\nThe following were included in the input data as features for the model:\n\n\n\n\n\n\n\nFactor\nVariables\n\n\n\n\nClimate\ntemperature, humidity, rainfall, solar radiation, wind speed, vegetation, air quality\n\n\nDemographics\npopulation, population density\n\n\nFacilities\nclinics, hospitals, sanitation, water source,\n\n\nEconomic activity\nnightlights radiance\n\n\n\nFor this model, we will define the training and testing set as follows:\n\n\n\nSet\nTime covered\n\n\n\n\nTraining\nJan 2014-Mar 2019 (75 mos)\n\n\nTesting\nApr 2014-Dec 2020 (20 mos)"
  },
  {
    "objectID": "open_model.html#generating-features",
    "href": "open_model.html#generating-features",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "Generating features",
    "text": "Generating features\n\nDefining an outbreak\nBased on column case_dengue_total, create a new column called outbreak containing 1 if a week is an outbreak week or 0 if not an outbreak week.\nFor this demo, we define a disease outbreak as follows:\n\nThe start of an outbreak occurs when the week’s cases are equal to or higher than a threshold.\n\nThe threshold is defined as the 75th percentile of total weekly cases based on years when a substantial number of cases are recorded.\n\nThe end of an outbreak occurs during the week when cases fall below the threshold for at least 2 weeks.\n\nThis is implemented in the code as follows:\n\n\nDefinition 1  \n# Create a new column 'outbreak' initialized with zeros\nlinked_data[\"outbreak\"] = 0\n\n# Track weeks satisfying the threshold, and count consecutive outbreak weeks\nconsecutive_weeks_below_threshold = 0\nprevious_outbreak = False\n\nfor index, row in linked_data.iterrows():\n    if row[\"case_total_dengue\"] &gt; OUTBREAK_THRESHOLD:\n        consecutive_weeks_below_threshold = 0\n        previous_outbreak = True\n        linked_data.at[index, \"outbreak\"] = 1\n    else:\n        # check if previous week was an outbreak\n        # if yes, continue to tag current week as outbreak\n        # part of observation period\n        if previous_outbreak and consecutive_weeks_below_threshold &lt; 2:\n            linked_data.at[index, \"outbreak\"] = 1\n            consecutive_weeks_below_threshold += 1\n        elif consecutive_weeks_below_threshold == 2:\n            linked_data.at[index, \"outbreak\"] = 0\n            previous_outbreak = False\n        else:\n            linked_data.at[index, \"outbreak\"] = 0\n\n\n\n\nAdding lagged features\nAdding previous weeks’ cases as features may help enhance the model’s capability in predicting future cases.\nExperiment with the lagged features by adding or removing them. Here, we include lagged features based on cases from the past 1-4 weeks leading up to the current week.\nThis is implemented in the code as follows:\n\n\n# Uncomment lines if you want to explore the other lags\nlagged_linked_data = linked_data.assign(\n    # prev_1_wk_numcases=linked_data[\"case_total_dengue\"].shift(\n    #     1, fill_value=0\n    # ),  # cases a week before\n    #prev_2_wk_numcases=linked_data[\"case_total_dengue\"].shift(\n    #    2, fill_value=0\n    #),  # cases 2 weeks before\n    prev_3_wk_numcases=linked_data[\"case_total_dengue\"].shift(\n         3, fill_value=0\n    ),  # cases 3 weeks before\n    prev_1_mo_numcases=linked_data[\"case_total_dengue\"].shift(\n        4, fill_value=0\n    ),  # cases 1 month before\n)\n\nprint(lagged_linked_data.shape)\nlagged_linked_data.head()\n\n(469, 30)\n\n\n\n\n  \n    \n\n\n\n\n\n\ndate\navg_rad_mean\nclinic_count\nclinic_nearest\ndentist_count\ndentist_nearest\ndoctors_count\ndoctors_nearest\nheat_index\nhospital_count\n...\nsolar_rad\ntave\ntmax\ntmin\nuv_rad\nwind_speed\ncase_total_dengue\noutbreak\nprev_3_wk_numcases\nprev_1_mo_numcases\n\n\n\n\n0\n2014-01-06\n0.476876\n0.0\n10000.0\n0.0\n10000.0\n0.0\n10000.0\n27.864492\n3.0\n...\n164.324125\n26.074474\n27.189105\n25.145137\n20.508032\n3.735253\n48.0\n0\n0.0\n0.0\n\n\n1\n2014-01-13\n0.476876\n0.0\n10000.0\n0.0\n10000.0\n0.0\n10000.0\n26.423877\n3.0\n...\n171.025991\n25.301183\n26.346243\n24.495746\n21.555577\n5.431501\n71.0\n0\n0.0\n0.0\n\n\n2\n2014-01-20\n0.476876\n0.0\n10000.0\n0.0\n10000.0\n0.0\n10000.0\n26.219015\n3.0\n...\n216.642606\n25.210041\n26.767400\n24.052373\n26.568703\n4.394535\n82.0\n1\n0.0\n0.0\n\n\n3\n2014-01-27\n0.476876\n0.0\n10000.0\n0.0\n10000.0\n0.0\n10000.0\n26.089990\n3.0\n...\n254.635173\n25.179454\n26.913508\n23.807367\n29.716182\n3.747729\n72.0\n1\n48.0\n0.0\n\n\n4\n2014-02-03\n0.476876\n0.0\n10000.0\n0.0\n10000.0\n0.0\n10000.0\n28.017441\n3.0\n...\n252.872288\n26.121420\n27.823145\n24.755817\n30.152179\n1.899688\n80.0\n1\n71.0\n48.0\n\n\n\n\n5 rows × 30 columns"
  },
  {
    "objectID": "open_model.html#model-training",
    "href": "open_model.html#model-training",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "Model training",
    "text": "Model training\nSince the training dataset has a time component, we use TimeSeriesSplit from sklearn to properly cross-validate the model. Here is how it splits the training data in the time dimension.\n\n\n# Illustrate time series split.\n# You may experiment the splits by changing the `n_splits` parameter.\n# Increasing the `n_splits` would give a narrower time period for the test set.\ntss = TimeSeriesSplit(n_splits=5)\nfor i, (split_train_index, split_test_index) in enumerate(tss.split(X_train)):\n    print(f'Split {i}:')\n    split_X_train, split_X_test = X_train.iloc[split_train_index, :], X_train.iloc[split_test_index, :]\n    split_y_train, split_y_test = y_train.iloc[split_test_index], y_train.iloc[split_test_index]\n    print(split_X_train.index.min(), split_X_train.index.max())\n    print(split_y_train.index.min(), split_y_train.index.max())\n\nSplit 0:\n2014-01-06 00:00:00 2014-12-01 00:00:00\n2014-12-08 00:00:00 2015-10-12 00:00:00\nSplit 1:\n2014-01-06 00:00:00 2015-10-12 00:00:00\n2015-10-19 00:00:00 2016-08-22 00:00:00\nSplit 2:\n2014-01-06 00:00:00 2016-08-22 00:00:00\n2016-08-29 00:00:00 2017-07-03 00:00:00\nSplit 3:\n2014-01-06 00:00:00 2017-07-03 00:00:00\n2017-07-10 00:00:00 2018-05-14 00:00:00\nSplit 4:\n2014-01-06 00:00:00 2018-05-14 00:00:00\n2018-05-21 00:00:00 2019-03-25 00:00:00\n\n\n\nThe model chosen for the demo is the random forest (RF) classifier. It is a ensemble machine learning method that constructs multiple decision trees from subsets of the training and averages over all these terrs to produce the final classification. Random forest classifiers are commonly used in various tasks like credit risk assessment, disease diagnosis, and customer churn prediction due to their high accuracy and ability to handle large datasets.\nThe RF classifier model is tuned using the GridSearchCV function from sklearn performs model scoring by going over all combinations of specified parameter values, called the parameter space.\n\n\n# Define parameter space to optimize\nparam_grid = {\n    \"n_estimators\": [50, 100, 200, 300, 500],\n    \"max_depth\": [None, 5, 10, 15, 20],\n}\n\n\n\n\n# Run GridSearch\nmodel_grid_search = GridSearchCV(classifier, param_grid, verbose=1, cv=tss)\nmodel_grid_search.fit(X_train, y_train)\n\nFitting 5 folds for each of 25 candidates, totalling 125 fits\n\n\nGridSearchCV(cv=TimeSeriesSplit(gap=0, max_train_size=None, n_splits=5, test_size=None),\n             estimator=RandomForestClassifier(random_state=42),\n             param_grid={'max_depth': [None, 5, 10, 15, 20],\n                         'n_estimators': [50, 100, 200, 300, 500]},\n             verbose=1)In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.GridSearchCVGridSearchCV(cv=TimeSeriesSplit(gap=0, max_train_size=None, n_splits=5, test_size=None),\n             estimator=RandomForestClassifier(random_state=42),\n             param_grid={'max_depth': [None, 5, 10, 15, 20],\n                         'n_estimators': [50, 100, 200, 300, 500]},\n             verbose=1)estimator: RandomForestClassifierRandomForestClassifier(random_state=42)RandomForestClassifierRandomForestClassifier(random_state=42)"
  },
  {
    "objectID": "open_model.html#test-accuracy",
    "href": "open_model.html#test-accuracy",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "Test accuracy",
    "text": "Test accuracy\n\n\n# Show results of model training\nprint(f\"Best hyperparameters: {model_grid_search.best_params_}\")\nprint(f\"Train best score: {model_grid_search.best_score_:0.4}\")\nprint(\n    f\"Train best score std: {np.std(model_grid_search.cv_results_['mean_test_score']):0.4}\"\n)\n\nBest hyperparameters: {'max_depth': None, 'n_estimators': 200}\nTrain best score: 0.8489\nTrain best score std: 0.007221\n\n\n\nUsing our training setup, the model predicted outbreak labels with 84.89% accuracy.\n\n\n# Show results\n\n# Evaluate the model on test data\nbest_rf_classifier_model = model_grid_search.best_estimator_\ntest_accuracy = best_rf_classifier_model.score(X_test, y_test)\nprint(\"Test Accuracy:\", test_accuracy)\n\nTest Accuracy: 0.9565217391304348\n\n\n\nThe tuned model predicts weekly outbreak labels with 95.65% accuracy.\nTo add detail, we can also view more metrics of the RF classification predictions using classification_report from sklearn.\n\n\nreport = classification_report(y_test, y_pred, output_dict=True)\nreport_df = pd.DataFrame(report).transpose()\nreport_df\n\n\n\n  \n    \n\n\n\n\n\n\nprecision\nrecall\nf1-score\nsupport\n\n\n\n\n0\n0.939394\n1.000000\n0.968750\n62.000000\n\n\n1\n1.000000\n0.866667\n0.928571\n30.000000\n\n\naccuracy\n0.956522\n0.956522\n0.956522\n0.956522\n\n\nmacro avg\n0.969697\n0.933333\n0.948661\n92.000000\n\n\nweighted avg\n0.959157\n0.956522\n0.955648\n92.000000\n\n\n\n\n\n    \n\n  \n    \n\n  \n    \n  \n    \n\n  \n\n    \n  \n\n\n\n  \n\n\n    \n        \n    \n\n  \n\n\n\n  \n\n    \n  \n\n\n\n\nIn our test set, we have 61 weeks that have no outbreaks and 30 weeks that have outbreaks. While the overall score is 94.5%, notice that the scores are slightly lower at 90-93% for the outbreak=1 category than outbreak=0."
  },
  {
    "objectID": "open_model.html#feature-importance",
    "href": "open_model.html#feature-importance",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "Feature importance",
    "text": "Feature importance\nSHAP (SHapley Additive exPlanations) is a method used in machine learning for explaining individual predictions. It assigns each feature an importance value by considering its contribution to the difference between the actual prediction and the average prediction. Read up more on this method here.\n\nFrom the results of SHAP, the features that drove the predictions are the cases from the previous weeks, the climate variables for temperature tmax and tave, and the mean population count."
  },
  {
    "objectID": "open_model.html#detected-outbreaks",
    "href": "open_model.html#detected-outbreaks",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "Detected outbreaks",
    "text": "Detected outbreaks\n\nBased on actual data, there is only one outbreak period for the target timespan, a 30-week event from 2019-04-22 to 2019-11-11. The model predicted a 26-week outbreak period from 2019-05-20 to 2019-11-11, which was detected 4 weeks after actual, and ended on the same week.\nWhile most of the outbreak period was covered, the model still needs to be trained to be more sensitive to the start of the outbreak, which is crucial for early intervention.\n\nThe model was able to determine outbreaks for the consectuve weeks in 2019-05-20 to 2019-11-11, when actual data records 75-380 weekly cases.\nFor the rest of 2020, it was also able to correctly identify that there should be no outbreaks during that year."
  },
  {
    "objectID": "open_model.html#probabilities",
    "href": "open_model.html#probabilities",
    "title": "Baseline model for predicting disease outbreak periods",
    "section": "Probabilities",
    "text": "Probabilities\nThe sklearn predict_proba method calculates the probability estimates of each class produced by a model. It returns an array containing the probability (0.0 to 1.0) of a single record belonging to a particular class. The predicted probabilities can be visualized through a colored histogram of the values.\n\nIn this plot, the line plot represents the number of cases over time and the gradient in the background represents the predicted probablity of an outbreak for that week. The darker the color the more likely it is to be classified as an outbreak.\nWeeks with sudden spikes are able to identified by the model as an outbreak along with the succeeding high weeks. It can also be seen in the plot that even during the low number of cases in 2020, the model is able to predict slightly higher probability for the weeks with sudden spikes. This can indicate some potential in using the probabilities as a signal for preparations for early intervention."
  }
]